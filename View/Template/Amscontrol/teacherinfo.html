<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 

<title>老师管理</title>

<link rel="stylesheet" type="text/css" href="{$smarty.const.IMG_SERVER}__PUBLIC__/amsmanage/css/common.css" />
<link rel="stylesheet" type="text/css" href="{$smarty.const.IMG_SERVER}__PUBLIC__/amsmanage/css/xxgl.css"  />
<link rel="stylesheet" type="text/css" href="{$smarty.const.IMG_SERVER}__PUBLIC__/js/dialogtree/css/weebox/weebox.css" />
<link rel="stylesheet" type="text/css" href="{$smarty.const.IMG_SERVER}__PUBLIC__/js/dialogtree/css/tree/tree.css" />

<script type="text/javascript" src="{$smarty.const.IMG_SERVER}__PUBLIC__/js/jquery-1.5.2.js"></script>
<script type="text/javascript" src="{$smarty.const.IMG_SERVER}__PUBLIC__/js/Share_mini.js"></script>
<script type="text/javascript" src="{$smarty.const.IMG_SERVER}__PUBLIC__/js/dialogtree/common/js/plugin/jquery.simple.tree.js"></script>
<script type="text/javascript" src="{$smarty.const.IMG_SERVER}__PUBLIC__/js/dialogtree/common/js/plugin/bgiframe.js"></script>
<script type="text/javascript" src="{$smarty.const.IMG_SERVER}__PUBLIC__/js/dialogtree/common/js/plugin/weebox.js"></script>
<script type="text/javascript" src="{$smarty.const.IMG_SERVER}__PUBLIC__/js/dialogtree/common/js/dialogtree.js"></script>
<script type="text/javascript" src="{$smarty.const.IMG_SERVER}__PUBLIC__/js/dialogtree/demo.js"></script>
<script type="text/javascript" src="{$smarty.const.IMG_SERVER}__PUBLIC__/amsmanage/js/page/lsxx.js"></script>

</head>
<body style="padding-top:30px; _width:98%">
<input id="school_id" type="hidden" value="{$schoolid}"/>
<div id="popDiv1" class="xzkc" style="display:none;">
     <p class="amstitle"><font>新增老师信息</font><a href="javascript:addWinFun.close();">关闭</a></p>
     <p><font color="#FF0000" >注意：系统会自动生成老师账号！</font></p>
     <p id="errorInfo" style="color:Red;"></p>
     <table width="100%" border="0" cellspacing="0" cellpadding="0">
	   <tr>
		 <td height="30" width="50" style="padding-left:10px;">姓&nbsp;&nbsp;&nbsp;&nbsp;名：</td>
		 <td><input id="popDiv1_inp" maxlength="30" type="text" class="kctx" /><span style="color:red;"> *</span></td>
	   </tr>
	   <tr>
		 <td height="30" style="padding-left:10px;">所任科目：</td>
		 <td height="30" style="padding-left:10px;"></td>
	   </tr>
	   <tr>
	   <td colspan="2">
	   <div style="overflow:scroll; height:100px; width:280px;  float:left; margin-left:10px; border:1px #CCC solid; overflow-x:hidden; scrollbar-face-color: #DBEBFE; scrollbar-shadow-color: #B8D6FA; scrollbar-highlight-color: #FFFFFF; scrollbar-3dlight-color: #DBEBFE; scrollbar-darkshadow-color:#458CE4; scrollbar-track-color: #DAF2FE; scrollbar-arrow-color: #458CE4; border:1px solid #DAF2FE;">
		   <table width="100%" border="0" cellspacing="0" cellpadding="0">
		   <tr>
			 {foreach from=$subInfo item=item key=key name=num}
			 <td style="padding-left:30px;"><input name="subjectId" type="checkbox" value="{$key}" title="{$item}" />&nbsp;&nbsp;{$item}</td>
		   {if $smarty.foreach.num.iteration%2 == 0}
		   </tr>
		   <tr>
		   {/if}
			 {/foreach}
		   </tr>
		 </table>
	   </div>
	 </td>
	   </tr>
	   </table>
	   <p><input id="is_use_office" name="is_use_office" type="checkbox" onclick="showcotent()" />使用集中办公平台</p>
      <div id="bgpt">
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <th height="30">所属部门：</th>
            <td>
            	<input type="text"  tabindex="2" onMouseOver="this.className='input_1'" 
                             onMouseOut="this.className='input_2'" disabled="true"　readOnly="true" id="dptname" class="text" />
            	<input type="hidden" id="dpt_id" name="department_id"/>
            </td>
            <td>
            <a id="showDpt" href="javascript:;" class="amsqx">选择部门</a>
            </td>
          </tr>
          <tr>
            <th height="30">职务：</th>
            <td><input id="duty" maxlength="8" name="duty" type="text" class="text" style="width:120px;"/><span style="color:red;"> *</span></td>
            <td></td>
          </tr>
          <tr>
            <th height="30">角色：</th>
            <td>
            	<select id="role" name="role" style="width:100px; height:20px; z-index:0">
            		<option value="-1" selected>--请选择--</option>
            		{foreach from=$role_info item=val}
		 				<option value="{$val.role_id}">{$val.role_name}</option>
		 			{/foreach}
            	</select><span style="color:red;"> *</span>
            	</td>
            	<td></td>
          </tr>
       </table>
       </div>
     <p><a href="javascript:addWinFun.ok();" class="amsqd" id="amsqdadd" style="width:120px; background:url({$smarty.const.IMG_SERVER}__PUBLIC__/amsmanage/images/amsqd_btn1.gif) no-repeat;">确定保存老师信息</a><a href="javascript:addWinFun.close();" class="amsqx">取消</a></p>
</div>

<div id="bg1" class="bg" style="display:none;"><div style="float:left; background:#666666;"></div></div>
<iframe id='popIframe1' class='popIframe' frameborder='0' ></iframe><!--增加老师信息-->
<div id="popDiv" class="xzkc" style="display:none;">
     <p class="amstitle"><font>修改老师信息</font><a href="javascript:updWinFun.close();">关闭</a></p>
     <p id="errorInfo_2" style="color:Red;"></p>
     <table width="100%" border="0" cellspacing="0" cellpadding="0">
	    <tr>
		  <td height="30" width="50" style="padding-left:10px;">姓&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名：</td>
		  <td><input id="popDiv_inp" maxlength="30" type="text" class="kctx" /><span style="color:red;"> *</span></td>
		</tr>
	    <tr>
		  <td height="30" style="padding-left:10px;">所任科目：</td>
		  <td height="30" style="padding-left:10px;"></td>
		</tr>
		<tr>
		  <td colspan="2">
			  <div style="overflow:scroll; height:160px; width:280px;  float:left; margin-left:10px; border:1px #CCC solid; overflow-x:hidden; scrollbar-face-color: #DBEBFE; scrollbar-shadow-color: #B8D6FA; scrollbar-highlight-color: #FFFFFF; scrollbar-3dlight-color: #DBEBFE; scrollbar-darkshadow-color:#458CE4; scrollbar-track-color: #DAF2FE; scrollbar-arrow-color: #458CE4; border:1px solid #DAF2FE;">
				<table width="100%" border="0" cellspacing="0" cellpadding="0">
				<tr>
				  {foreach from=$subInfo item=item key=key name=num}
				  <td style="padding-left:30px;"><input name="subjectId_2" type="checkbox" value="{$key}" title="{$item}" />&nbsp;&nbsp;{$item}</td>
				  {if $smarty.foreach.num.iteration%2 == 0}
				</tr>
				<tr>
				  {/if}
				  {/foreach}
				</tr>
				</table>
			 </div>
		 </td>
		</tr>
	 </table>
	 <p><input id="upd_is_use_office" name="upd_is_use_office" type="checkbox" onclick="showupdcotent()" />使用集中办公平台</p>
      <div id="bgpt2">
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <th height="30">所属部门：</th>
            <td><input id="dptname1" name="upd_department_name" type="text" tabindex="2" onMouseOver="this.className='input_1'" 
                             onMouseOut="this.className='input_2'" disabled="true"　readOnly="true" class="text" /><input id="dpt_id1" name="upd_department_id" type="hidden" class="text" /></td>
            <td><a id="showDpt1" href="javascript:;" class="amsqx">选择部门</a>
            </td>
          </tr>
          <tr>
            <th height="30">职务：</th>
            <td><input id="upd_duty" maxlength="8" name="upd_duty" type="text" class="text" style="width:120px;"/><span style="color:red;"> *</span></td>
            <td></td>
          </tr>
          <tr>
            <th height="30">角色：</th>
            <td>
            	<select id="upd_role" name="upd_role" style="width:100px; height:20px; z-index:0">
            		<option value="-1">--请选择--</option>
            		{foreach from=$role_info item=val}
				 			<option value="{$val.role_id}">{$val.role_name}</option>
				 	{/foreach}
           		</select><span style="color:red;"> *</span>
       		</td>
            <td></td>
          </tr>
       </table>
       </div>
     <p><a href="javascript:updWinFun.ok();" class="amsqd" id="amsqdmodif">保存修改</a><a href="javascript:updWinFun.close();" class="amsqx">取消</a></p>
</div>

<div id="bg" class="bg" style="display:none;"><div style="float:left; background:#666666;"></div></div>
<iframe id='popIframe' class='popIframe' frameborder='0' ></iframe><!--修改老师信息-->
<table width="92%" border="0" cellspacing="0" cellpadding="0" >
  <tr>
    <td height="20" valign="middle" style="background:url({$smarty.const.IMG_SERVER}__PUBLIC__/amsmanage/images/iconr.gif) no-repeat 8px center; padding-left:28px;">您好：<font color="#FF0000">{$username}</font> ，欢迎使用AMS账号管理系统！ 您现在的位置：<a href="#" class="amswz">学校管理</a>  >><a href="#" class="amswz">老师管理</a></td>
  </tr>
</table>
<table width="92%" border="0" cellspacing="0" cellpadding="0" class="padleft">
  <tr>
    <td height="27" colspan="2" class="bt STYLE1">老师管理</td>
  </tr>
  <tr>
    <td height="10" colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td height="25" colspan="2" bgcolor="#fbf6f7"  style="padding-top:10px;">    
        <a href="javascript:addWinFun.open();" class="amsqd">增加老师信息</a>
        {if $operationStrategy!=1}<a class="amsqd" href="/Amscontrol/Amsteacher/addTeacherBPhone/schoolid/{$schoolid}">手机号绑定</a>{/if}
        {if $smarty.const.IS_SET_OLDACCOUNT_IMPORT == 1}<a class="amsqd" href="/Amscontrol/Oldaccountimport/showimportaccount/schoolid/{$schoolid}">老师账号导入</a>{/if}
    </td>
  </tr>
    <tr>
    <td align="left" bgcolor="#fbf6f7" style="padding-bottom:10px;">
  <form id="form" action="__URL__/showTercherManage/schoolId/{$schoolid}/outputexcel/excel" method="post">
    <table width="50%" border="1" align="left" cellspacing="0" bordercolor="#CCCCCC" style="border-collapse:collapse;">
	  <tr>
	    <td height="30" align="center" bgcolor="#CCCCCC"><strong>姓名</strong><input type="hidden" name="title[]" value="姓名" /></td>
	    <td width="220" align="center" bgcolor="#CCCCCC"><strong>所任科目</strong><input type="hidden" name="title[]" value="所任科目" /></td>
	    <td height="30" align="center" bgcolor="#CCCCCC"><strong>账号</strong><input type="hidden" name="title[]" value="账号" /></td>
	    <td height="30" align="center" bgcolor="#CCCCCC"><strong>是否使用集中办公平台</strong></td>
	    <td width="70" height="30" align="center" bgcolor="#CCCCCC"><strong>操作</strong></td>
	  </tr>
	  <tbody id="pTbody">
	  {foreach from=$tercherInfo item=val}
	  <tr>
	    <td height="30" align="center" id="pTbody_name_{$val.client_account}">{$val.client_name}</td><!-- pTbody_name_1注解:"pTbody_name_"死数据; "1":为数据id -->
	    <td height="30" align="center" id="pTbody_course_{$val.client_account}">{$val.subjectName}</td><!-- pTbody_course_1注解:"pTbody_course_"死数据; "1":为数据id -->
	    <td height="30" align="center">{$val.client_account}</td>
	    <td height="30" align="center"  id="pTbody_office_{$val.client_account}">{if $val.is_use_office == 1}是{else}否{/if}</td>
	    <td height="30" align="center">
		    <a href="javascript:void();" onclick="updWinFun.open({$val.client_account});" class="zjxk">修改</a>
		    <input id="is_office_{$val.client_account}" type="hidden" value="{$val.is_use_office}"/>
		    <input id="dpt_name_{$val.client_account}" type="hidden" value="{$val.dpt_name}"/>
		    <input id="dpt_id_{$val.client_account}" type="hidden" value="{$val.dpt_id}"/>
		    <input id="duty_name_{$val.client_account}" type="hidden" value="{$val.duty_name}"/>
		    <input id="role_id_{$val.client_account}" type="hidden" value="{$val.role_id}"/>
		    <input id="pTbody_courseVal_{$val.client_account}" type="hidden" value="{$val.teacher_subject}" />
	    </td>
	  </tr>
	  {/foreach}
	  </tbody>
    </table>
  </form>
</td>
  </tr>
    <tr>
      <td height="25" colspan="2" bgcolor="#fbf6f7"><a href="#" onclick="lslist('__URL__/showTercherManage/schoolId/{$schoolid}/stamp/stamp')" class="amsqx" style="margin-right:25px;">打印</a><a href="#" onclick="javascript:document.forms['form'].submit();" class="amsqx">输出excel</a></td>
  </tr>
  <tr>
      <td height="25" colspan="2" bgcolor="#fbf6f7"></td>
  </tr>
</table>

{literal}
<script type="text/javascript">
	var schoolID= $('#school_id').val();    //php 给schoolID赋值 位置

	if(schoolID == undefined || schoolID ==-1)
	{
	    alert("系统出现异常，请刷新后重试");
	}
	
	function lslist(page){
		window.open(page);
	}
	
	function showcotent(){
		var is_use_office = document.getElementById("is_use_office");
		if(is_use_office.checked == true){
			document.getElementById("bgpt").style.display="block"; 
		}else{
			document.getElementById("bgpt").style.display="none"; 
		}
	}
	
	function showupdcotent(){
		var is_use_office = document.getElementById("upd_is_use_office");
		if(is_use_office.checked == true){
			document.getElementById("bgpt2").style.display="block"; 
		}else{
			document.getElementById("bgpt2").style.display="none"; 
		}
	}
</script>
{/literal}

</body>
</html>
